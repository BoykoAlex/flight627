<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<!--
/*******************************************************************************
 *  Copyright (c) 2013 GoPivotal, Inc.
 *  All rights reserved. This program and the accompanying materials
 *  are made available under the terms of the Eclipse Public License v1.0
 *  which accompanies this distribution, and is available at
 *  http://www.eclipse.org/legal/epl-v10.html
 *
 *  Contributors:
 *      GoPivotal, Inc. - initial API and implementation
 *******************************************************************************/
 -->
<plugin>

   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
      		allPopups="false"
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
          <menu
                id="org.springframework.ide.eclipse.ui.cloudsync"
                label="Flight 627">
	         <command
	               commandId="org.springsource.ide.eclipse.ui.cloudsync.connect"
	               style="push">
	            <visibleWhen
	                  checkEnabled="false">
	               <with
	                     variable="activeMenuSelection">
	                  <iterate
	                        ifEmpty="false"
	                        operator="or">
	                     <adapt
	                           type="org.eclipse.core.resources.IProject">
	                     </adapt>
	                  </iterate>
	               </with>
	            </visibleWhen>
	         </command>
	         <command
	               commandId="org.springsource.ide.eclipse.ui.cloudsync.disconnect"
	               style="push">
	            <visibleWhen
	                  checkEnabled="false">
	               <with
	                     variable="activeMenuSelection">
	                  <iterate
	                        ifEmpty="false"
	                        operator="or">
	                     <adapt
	                           type="org.eclipse.core.resources.IProject">
	                     </adapt>
	                  </iterate>
	               </with>
	            </visibleWhen>
	         </command>
          </menu> 
      </menuContribution>
   </extension>
   
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="org.springsource.ide.eclipse.cloudsync.handlers.SyncConnectHandler"
            id="org.springsource.ide.eclipse.ui.cloudsync.connect"
            name="Connect">
      </command>
   </extension>

   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="org.springsource.ide.eclipse.cloudsync.handlers.SyncDisconnectHandler"
            id="org.springsource.ide.eclipse.ui.cloudsync.disconnect"
            name="Disconnect">
      </command>
   </extension>

</plugin>
